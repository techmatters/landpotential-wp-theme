{"version":3,"sources":["src/newsletter.js"],"names":[],"mappings":"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","file":"newsletter.src.js","sourcesContent":["window.lpks = {\n\tgcaptchaHandler: function() {\n\t\tgrecaptcha.execute( localize.sitekey, {action: 'validate_captcha'} ).then( function( token ) {\n\t\t\tdocument.getElementById( 'g-recaptcha-response' ).value = token;\n\t\t} );\n\t},\n\n\tprocessSubscription: function( event ) {\n\t\tevent.preventDefault();\n\n\t\tjQuery.ajax( {\n\t\t\ttype: 'POST',\n\t\t\turl: localize._ajax_url,\n\t\t\tdata: {\n\t\t\t\t_ajax_nonce: localize._ajax_nonce,\n\t\t\t\taction: 'newsletter_subscribe',\n\t\t\t\ttoken: document.getElementById( 'g-recaptcha-response' ).value,\n\t\t\t\temail: event.target.querySelector( 'input[name=\"email\"]' ).value,\n\t\t\t\tfirst_name: event.target.querySelector( 'input[name=\"first_name\"]' ).value,\n\t\t\t\tlast_name: event.target.querySelector( 'input[name=\"last_name\"]' ).value\n\t\t\t},\n\t\t\tsuccess: ( res ) => {\n\t\t\t\tif ( true === res.success ) {\n\t\t\t\t\tjQuery( event.target.querySelector( '.form-fields' ) ).slideUp();\n\t\t\t\t\tevent.target.querySelector( '.message' ).textContent = localize.success;\n\t\t\t\t} else {\n\t\t\t\t\tlet errorMessage = localize.error_codes[res?.data?.error_code];\n\t\t\t\t\tif ( 4 === res?.data?.error_code ) { // 4 is a JSON parsing error.\n\t\t\t\t\t\terrorMessage += ` (${res?.data?.error_message})`;\n\t\t\t\t\t}\n\t\t\t\t\tevent.target.querySelector( '.message' ).textContent = errorMessage;\n\n\t\t\t\t\t// Reset the CAPTCHA after a failure.\n\t\t\t\t\twindow.lpks.gcaptchaHandler();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tsetup: function() {\n\t\tconst subscribeForm = document.getElementById( 'inline-subscribe' );\n\n\t\tif ( subscribeForm ) {\n\t\t\tsubscribeForm.addEventListener( 'submit', window.lpks.processSubscription );\n\t\t\tgrecaptcha.ready( window.lpks.gcaptchaHandler );\n\t\t}\n\t}\n};\n\ndocument.addEventListener( 'DOMContentLoaded', window.lpks.setup );\n"]}