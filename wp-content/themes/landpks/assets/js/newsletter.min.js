window.lpks={gcaptchaHandler:function(){grecaptcha.execute(localize.sitekey,{action:"validate_captcha"}).then(function(e){document.getElementById("g-recaptcha-response").value=e})},processSubscription:function(a){a.preventDefault(),jQuery.ajax({type:"POST",url:localize._ajax_url,data:{_ajax_nonce:localize._ajax_nonce,action:"newsletter_subscribe",token:document.getElementById("g-recaptcha-response").value,email:a.target.querySelector('input[name="email"]').value,first_name:a.target.querySelector('input[name="first_name"]').value,last_name:a.target.querySelector('input[name="last_name"]').value},success:t=>{if(!0===t.success)jQuery(a.target.querySelector(".form-fields")).slideUp(),a.target.querySelector(".message").textContent=localize.success;else{let e=localize.error_codes[t?.data?.error_code];4===t?.data?.error_code&&(e+=` (${t?.data?.error_message})`),a.target.querySelector(".message").textContent=e,window.lpks.gcaptchaHandler()}}})},setup:function(){var e=document.getElementById("inline-subscribe");e&&(e.addEventListener("submit",window.lpks.processSubscription),grecaptcha.ready(window.lpks.gcaptchaHandler))}},document.addEventListener("DOMContentLoaded",window.lpks.setup);